# =============================================================================
# OMGKIT Workflow Configuration
# =============================================================================
# This file configures your Git workflow, commit conventions, PR settings,
# code review automation, and deployment preferences.
#
# Documentation: https://omg.mintlify.app/skills/workflow-config
# Generated by: omgkit init
# =============================================================================

version: "1.0"

# =============================================================================
# GIT WORKFLOW
# =============================================================================
git:
  # Workflow type: trunk-based | gitflow | github-flow
  workflow: trunk-based

  # Main branch name
  main_branch: main

  # Branch naming prefixes
  branch_prefix:
    feature: "feature/"
    fix: "fix/"
    hotfix: "hotfix/"

  # Maximum branch age in days (for trunk-based)
  max_branch_age_days: 2

  # Auto-delete branch after merge
  delete_branch_on_merge: true

# =============================================================================
# COMMIT CONVENTIONS
# =============================================================================
commit:
  # Use conventional commits (type: subject)
  conventional: true

  # Require scope: type(scope): subject
  require_scope: false

  # Allowed commit types
  allowed_types:
    - feat      # New feature
    - fix       # Bug fix
    - docs      # Documentation
    - style     # Formatting
    - refactor  # Code restructuring
    - perf      # Performance
    - test      # Tests
    - chore     # Maintenance

  # Maximum subject line length
  max_subject_length: 72

# =============================================================================
# PULL REQUEST SETTINGS
# =============================================================================
pr:
  # PR template: auto | none | path/to/template.md
  template: auto

  # Require review before merge
  require_review: true

  # Minimum reviewers
  min_reviewers: 1

  # Create as draft by default
  draft_by_default: false

  # Squash merge commits
  squash_merge: true

  # Auto-labeling
  labels:
    enabled: true
    by_path:
      "src/api/**": ["backend"]
      "src/ui/**": ["frontend"]
      "tests/**": ["testing"]

# =============================================================================
# CODE REVIEW
# =============================================================================
review:
  # Enable Claude auto-review
  auto_review: true

  # Review checks
  checks:
    - security
    - performance
    - best-practices

  # Block merge on critical issues
  block_on_critical: true

# =============================================================================
# DEPLOYMENT
# =============================================================================
deploy:
  # Provider: vercel | netlify | aws | none
  provider: vercel

  # Production branch
  production_branch: main

  # Preview deployments for PRs
  preview_on_pr: true

  # Auto-deploy on merge
  auto_deploy: true

# =============================================================================
# GIT HOOKS
# =============================================================================
hooks:
  pre_commit:
    enabled: true
    actions:
      - lint
      - format

  commit_msg:
    enabled: true
    validate_conventional: true

  pre_push:
    enabled: true
    actions:
      - test

# =============================================================================
# FEATURE FLAGS
# =============================================================================
feature_flags:
  # Provider: none | vercel-edge | launchdarkly | unleash
  provider: none

  # Default state for new flags
  default_state: false
