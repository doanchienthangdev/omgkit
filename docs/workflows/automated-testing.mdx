---
title: "Automated Testing Workflow"
description: "End-to-end testing automation workflow that generates test plans, creates test tasks, executes tests, and enforces coverage gates before completion."
icon: "flask-vial"
---

<Info>
  **Category:** Testing

  **Complexity:** ğŸŸ¡ Medium

  **Estimated Time:** 1-3 hours
</Info>

## Quick Start

```bash
/workflow:automated-testing "your description here"
```


# Automated Testing Workflow

## Overview

This workflow automates the entire testing lifecycle from test planning through execution and verification. It ensures comprehensive test coverage by automatically generating test tasks, enforcing coverage gates, and blocking completion until all requirements are met.

## Workflow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AUTOMATED TESTING WORKFLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ANALYZE  â”‚â”€â”€â”€â–¶â”‚  PLAN    â”‚â”€â”€â”€â–¶â”‚ EXECUTE  â”‚â”€â”€â”€â–¶â”‚  VERIFY  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚               â”‚               â”‚
       â–¼               â–¼               â–¼               â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Feature  â”‚    â”‚ Test     â”‚    â”‚ Run      â”‚    â”‚ Check    â”‚
  â”‚ Analysis â”‚    â”‚ Tasks    â”‚    â”‚ Tests    â”‚    â”‚ Coverage â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚               â”‚               â”‚
       â–¼               â–¼               â–¼               â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Test     â”‚    â”‚ Write    â”‚    â”‚ Fix      â”‚    â”‚ Mark     â”‚
  â”‚ Strategy â”‚    â”‚ Tests    â”‚    â”‚ Failures â”‚    â”‚ Done     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Steps

### Step 1: Analyze Feature

**Agent:** planner
**Purpose:** Understand the feature and determine testing strategy.

**Actions:**
1. Read feature requirements
2. Identify code changes
3. Classify feature type (API, UI, logic, etc.)
4. Determine required test types
5. Set coverage targets

**Output:**
```yaml
feature_analysis:
  type: api_endpoint
  files_changed:
    - src/handlers/user.ts
    - src/services/userService.ts
  required_tests:
    - unit
    - integration
    - contract
  optional_tests:
    - security
    - performance
  coverage_target: 90%
```

---

### Step 2: Generate Test Plan

**Agent:** planner
**Purpose:** Create comprehensive test plan with all test cases.

**Actions:**
1. Generate test cases for each test type
2. Define acceptance criteria
3. Identify test file locations
4. Estimate effort
5. Create test task backlog

**Output:**
```markdown
## Test Plan

### Unit Tests (12 cases)
- Handler validation tests
- Service logic tests
- Error handling tests

### Integration Tests (6 cases)
- Full API request/response
- Database operations
- External service calls

### Contract Tests (4 cases)
- Request schema validation
- Response schema validation
- Error response format
```

---

### Step 3: Create Test Tasks

**Agent:** planner
**Purpose:** Generate actionable test tasks in todo list.

**Actions:**
1. Create test tasks from plan
2. Link to implementation tasks
3. Set priorities
4. Define acceptance criteria per task
5. Add to sprint backlog

**Output:**
```
Todo List Updated:
â˜ TEST-001: Unit tests for user handler (P1)
â˜ TEST-002: Unit tests for user service (P1)
â˜ TEST-003: Integration tests for user API (P1)
â˜ TEST-004: Contract tests for user schema (P2)
â˜ TEST-005: Security tests for user endpoints (P2)
```

---

### Step 4: Write Tests

**Agent:** tester
**Purpose:** Implement all test cases.

**Actions:**
1. Create test files
2. Write test cases
3. Add assertions
4. Configure mocks
5. Verify tests run

**Quality Checks:**
- Tests follow naming conventions
- Assertions are meaningful
- Mocks are properly isolated
- Edge cases covered
- Error cases tested

---

### Step 5: Execute Tests

**Agent:** tester
**Purpose:** Run all tests and collect results.

**Actions:**
1. Run unit tests
2. Run integration tests
3. Run contract tests
4. Run security tests (if applicable)
5. Collect coverage data

**Commands:**
```bash
npm test                    # All tests
npm run test:coverage       # With coverage
npm run test:integration    # Integration only
```

---

### Step 6: Analyze Results

**Agent:** tester
**Purpose:** Review test results and identify issues.

**Actions:**
1. Check for failures
2. Identify flaky tests
3. Review coverage gaps
4. Prioritize fixes
5. Update test tasks

**Output:**
```
Test Results:
âœ… Unit: 45/45 passed
âŒ Integration: 8/10 passed (2 failed)
âœ… Contract: 6/6 passed

Coverage:
- Lines: 82%
- Branches: 75%
- Functions: 90%
```

---

### Step 7: Fix Failures

**Agent:** fullstack-developer / tester
**Purpose:** Address test failures and coverage gaps.

**Actions:**
1. Debug failing tests
2. Fix implementation bugs
3. Add missing tests
4. Improve coverage
5. Re-run tests

**Loop:** Repeat Steps 5-7 until all pass

---

### Step 8: Verify Completion

**Agent:** code-reviewer
**Purpose:** Final verification before marking done.

**Actions:**
1. Run `/quality:verify-done`
2. Check all gates passed
3. Review test quality
4. Approve completion
5. Mark feature as done

**Final Check:**
```
/quality:verify-done FEAT-042

âœ… All tests passing (65/65)
âœ… Coverage 92% â‰¥ 90% target
âœ… No security vulnerabilities
âœ… All test tasks complete
âœ… Code review approved

â†’ Feature FEAT-042 marked as DONE
```

---

## Quality Gates

| Gate | Minimum | Target | Blocking |
|------|---------|--------|----------|
| Unit Coverage | 80% | 90% | Yes |
| Integration Coverage | 60% | 75% | Yes |
| All Tests Pass | 100% | 100% | Yes |
| No Skipped Critical | 100% | 100% | Yes |
| Security Scan | Pass | Pass | Yes |
| Mutation Score | 50% | 75% | No |

---

## Configuration

Add to `.omgkit/workflow.yaml`:

```yaml
testing:
  enforcement:
    level: standard

  auto_generate_tasks: true

  coverage_gates:
    unit:
      minimum: 80
      target: 90
    integration:
      minimum: 60
      target: 75
    overall:
      minimum: 75
      target: 85

  required_test_types:
    - unit
    - integration

  optional_test_types:
    - e2e
    - security
    - performance

  blocking:
    on_test_failure: true
    on_coverage_below_minimum: true
```

---

## Agent Handoff Protocol

### planner â†’ tester
```yaml
handoff:
  test_plan: "Full test plan with cases"
  test_tasks: "Created in todo list"
  priorities: "P1 tests first"
  coverage_targets: "90% for this feature"
```

### tester â†’ code-reviewer
```yaml
handoff:
  test_results: "All 65 tests passing"
  coverage_report: "92% coverage achieved"
  test_files: "List of created test files"
  notes: "Edge cases for retry logic added"
```

---

## Troubleshooting

### Tests Won't Pass

1. Check test isolation (no shared state)
2. Verify mocks are correct
3. Check async/await handling
4. Review test environment setup

### Coverage Too Low

1. Identify uncovered lines
2. Add edge case tests
3. Add error path tests
4. Check branch coverage

### Flaky Tests

1. Remove timing dependencies
2. Use proper async patterns
3. Isolate external services
4. Add retry logic for CI

---

## Quick Commands

| Phase | Command |
|-------|---------|
| Plan | `/quality:test-plan` |
| Create | `/dev:feature-tested` |
| Execute | `/dev:test` |
| Coverage | `/quality:coverage-check` |
| Verify | `/quality:verify-done` |

---

## Related Workflows

- [Comprehensive Testing](./comprehensive-testing.md) - 4D testing approach
- [Test-Driven Development](./test-driven-development.md) - TDD workflow
- [Security Hardening](./security-hardening.md) - Security testing focus



## Agents Used

This workflow orchestrates the following agents:

- **[@planner](/agents/planner)** - Specialized agent for planner tasks
- **[@tester](/agents/tester)** - Specialized agent for tester tasks
- **[@code-reviewer](/agents/code-reviewer)** - Specialized agent for code reviewer tasks
- **[@fullstack-developer](/agents/fullstack-developer)** - Specialized agent for fullstack developer tasks



## Skills Applied

- **[methodology/test-task-generation](/skills/methodology/test-task-generation)** - Domain expertise
- **[methodology/test-enforcement](/skills/methodology/test-enforcement)** - Domain expertise
- **[testing/comprehensive-testing](/skills/testing/comprehensive-testing)** - Domain expertise
- **[testing/vitest](/skills/testing/vitest)** - Domain expertise
- **[testing/playwright](/skills/testing/playwright)** - Domain expertise



## Commands Triggered

- `/quality:test-plan`
- `/quality:verify-done`
- `/quality:coverage-check`
- `/dev:feature-tested`
- `/dev:test`



## Prerequisites

- Testing framework configured (Vitest, Jest, Pytest, etc.)
- Coverage tool configured
- Workflow config with testing section


## Orchestration Graph

### Agents Orchestrated

| Agent | Skills | Commands |
|-------|--------|----------|
| [planner](/agents/planner) | methodology/writing-plans, methodology/executing-plans... | /planning:plan, /planning:plan-detailed... |
| [tester](/agents/tester) | methodology/test-driven-development, methodology/testing-anti-patterns... | /dev:test, /dev:tdd... |
| [code-reviewer](/agents/code-reviewer) | methodology/verification-before-completion, methodology/receiving-code-review... | /dev:review |
| [fullstack-developer](/agents/fullstack-developer) | methodology/executing-plans, methodology/verification-before-completion... | /dev:feature, /dev:fix... |

### Skills Applied

| Skill | Description |
|-------|-------------|
| [methodology/test-task-generation](/skills/test-task-generation) | The agent automatically generates comprehensive test tasks f... |
| [methodology/test-enforcement](/skills/test-enforcement) | The agent enforces mandatory test completion before any task... |
| [testing/comprehensive-testing](/skills/comprehensive-testing) | Comprehensive 4D testing methodology covering Accuracy, Perf... |
| [testing/vitest](/skills/vitest) | Claude writes fast, reliable tests using Vitest for TypeScri... |
| [testing/playwright](/skills/playwright) | Claude writes reliable E2E tests using Playwright for browse... |

### Commands Available

| Command | Description |
|---------|-------------|
| [`/quality:test-plan`](/commands/quality-test-plan) | Generate a comprehensive test plan for a feature or task, id... |
| [`/quality:verify-done`](/commands/quality-verify-done) | Verify all test requirements are met before marking a task o... |
| [`/quality:coverage-check`](/commands/quality-coverage-check) | Check test coverage against configured gates and report unco... |
| [`/dev:feature-tested`](/commands/dev-feature-tested) | Create a feature with automatically generated test tasks. En... |
| [`/dev:test`](/commands/dev-test) | Generate and run tests |


## Tips for Best Results

<Note>
Provide detailed context in your workflow description. Include specific requirements, constraints, and expected outcomes for optimal agent performance.
</Note>

## Related Workflows

<CardGroup cols={2}>
  <Card title="All Workflows" icon="diagram-project" href="/workflows/overview">
    See all 69 workflows
  </Card>
  <Card title="Testing" icon="flask-vial" href="/workflows/overview#testing">
    More testing workflows
  </Card>
</CardGroup>
