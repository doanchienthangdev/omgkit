---
title: "refactor"
description: "Improve code quality without changing behavior"
icon: "code"
---

<Info>
  **Category:** Development

  **Complexity:** ðŸŸ¡ Medium

  **Estimated Time:** 1-4 hours
</Info>

## Quick Start

```bash
/workflow:refactor "your description here"
```


# Refactoring Workflow

## Overview

The Refactoring workflow helps improve code quality, maintainability, and performance without changing the external behavior. It ensures changes are safe through comprehensive testing.

## When to Use

- Reducing code complexity
- Improving readability
- Eliminating code duplication
- Applying design patterns
- Optimizing performance
- Modernizing legacy code

## Steps

### Step 1: Analysis
**Agent:** code-reviewer
**Command:** `/quality:refactor "$ARGUMENTS"`
**Duration:** 15-30 minutes

The code reviewer will:
- Analyze current code structure
- Identify refactoring opportunities
- Assess risk and impact
- Create refactoring plan

**Output:** Refactoring plan

### Step 2: Ensure Test Coverage
**Agent:** tester
**Command:** `/dev:test`
**Duration:** 15-45 minutes

The tester agent will:
- Check existing test coverage
- Add tests for uncovered code
- Create characterization tests
- Establish behavior baseline

**Output:** Comprehensive test coverage

### Step 3: Refactor
**Agent:** fullstack-developer
**Command:** Implement refactoring
**Duration:** 30-120 minutes

The fullstack developer will:
- Apply refactoring incrementally
- Run tests after each change
- Maintain external behavior
- Follow refactoring patterns

**Output:** Refactored code

### Step 4: Verify
**Agent:** tester
**Command:** `/dev:test`
**Duration:** 15-30 minutes

The tester agent will:
- Run all tests
- Verify behavior unchanged
- Check performance impact
- Validate improvements

**Output:** Verification report

### Step 5: Review & Commit
**Agent:** code-reviewer, git-manager
**Command:** `/dev:review && /git:commit`
**Duration:** 15-30 minutes

Review the refactoring and commit:
- Verify refactoring goals met
- Check code quality improved
- Commit with clear message

**Output:** Committed refactoring

## Quality Gates

- [ ] Test coverage adequate before starting
- [ ] All tests pass after each change
- [ ] External behavior unchanged
- [ ] Code quality metrics improved
- [ ] Performance not degraded
- [ ] Changes reviewed and approved

## Refactoring Patterns

```
Common Refactoring Patterns
===========================
- Extract Method: Break large methods into smaller ones
- Extract Class: Split large classes
- Rename: Improve naming clarity
- Move Method/Field: Better organization
- Replace Conditional with Polymorphism
- Introduce Parameter Object
- Replace Magic Numbers with Constants
- Remove Dead Code
```

## Tips

- Always have tests before refactoring
- Make small, incremental changes
- Run tests after each change
- Commit frequently
- Don't mix refactoring with feature changes

## Example Usage

```bash
# Refactor specific area
/workflow:refactor "UserService class - reduce complexity"

# Refactor for performance
/workflow:refactor "database queries in OrderRepository"

# Refactor for readability
/workflow:refactor "authentication middleware - improve clarity"
```

## Related Workflows

- `feature` - For adding new functionality
- `performance-optimization` - For performance-focused improvements
- `code-review` - For review-only workflows



## Agents Used

This workflow orchestrates the following agents:

- **[@code-reviewer](/agents/code-reviewer)** - Specialized agent for code reviewer tasks
- **[@fullstack-developer](/agents/fullstack-developer)** - Specialized agent for fullstack developer tasks
- **[@tester](/agents/tester)** - Specialized agent for tester tasks
- **[@git-manager](/agents/git-manager)** - Specialized agent for git manager tasks



## Skills Applied

- **[methodology/verification-before-completion](/skills/methodology/verification-before-completion)** - Domain expertise
- **[methodology/test-driven-development](/skills/methodology/test-driven-development)** - Domain expertise



## Commands Triggered

- `/quality:refactor`
- `/dev:test`
- `/dev:review`
- `/git:commit`



## Prerequisites

- Adequate test coverage exists
- Clear refactoring goals defined


## Orchestration Graph

### Agents Orchestrated

| Agent | Skills | Commands |
|-------|--------|----------|
| [code-reviewer](/agents/code-reviewer) | methodology/verification-before-completion, methodology/receiving-code-review... | /dev:review |
| [fullstack-developer](/agents/fullstack-developer) | methodology/executing-plans, methodology/verification-before-completion... | /dev:feature, /dev:fix... |
| [tester](/agents/tester) | methodology/test-driven-development, methodology/testing-anti-patterns... | /dev:test, /dev:tdd... |
| [git-manager](/agents/git-manager) | methodology/finishing-development-branch, devops/github-actions | /git:commit, /git:pr... |

### Skills Applied

| Skill | Description |
|-------|-------------|
| [methodology/verification-before-completion](/skills/verification-before-completion) | AI agent validates work through evidence-based verification ... |
| [methodology/test-driven-development](/skills/test-driven-development) | AI agent practices test-first development with the Red-Green... |

### Commands Available

| Command | Description |
|---------|-------------|
| [`/quality:refactor`](/commands/quality-refactor) | Improve code structure |
| [`/dev:test`](/commands/dev-test) | Generate and run tests |
| [`/dev:review`](/commands/dev-review) | Code review with security and quality focus |
| [`/git:commit`](/commands/git-commit) | Smart commit with conventional message |


## Tips for Best Results

<Note>
Provide detailed context in your workflow description. Include specific requirements, constraints, and expected outcomes for optimal agent performance.
</Note>

## Related Workflows

<CardGroup cols={2}>
  <Card title="All Workflows" icon="diagram-project" href="/workflows/overview">
    See all 61 workflows
  </Card>
  <Card title="Development" icon="code" href="/workflows/overview#development">
    More development workflows
  </Card>
</CardGroup>
